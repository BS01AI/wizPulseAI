# WizPulseAI ä¸‰ç«™ç‚¹éƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æŒ‡å—æä¾›å®Œæ•´çš„ WizPulseAI ä¸‰ç«™ç‚¹ï¼ˆAuth + Dashboard + Mainï¼‰ä»æœ¬åœ°æµ‹è¯•åˆ°ç”Ÿäº§éƒ¨ç½²çš„è¯¦ç»†æ­¥éª¤ã€‚

## ğŸ¯ ç›®æ ‡

1. âœ… æœ¬åœ°ç¯å¢ƒä¸‰ç«™ç‚¹æ­£å¸¸è¿è¡Œ
2. âœ… SSO å•ç‚¹ç™»å½•åŠŸèƒ½å®Œæ•´æµ‹è¯•
3. âœ… ç”¨æˆ·ç®¡ç†åŠŸèƒ½æ‰“é€šéªŒè¯
4. âœ… ç”Ÿäº§ç¯å¢ƒæˆåŠŸéƒ¨ç½²ä¸Šçº¿

## ğŸ“š æ–‡æ¡£ç»“æ„

```
docs/deployment/
â”œâ”€â”€ 251030-DEPLOYMENT_GUIDE.md (æœ¬æ–‡æ¡£)  # æ€»è§ˆå’Œå¯¼èˆª
â”œâ”€â”€ phase1-local-testing.md              # Phase 1: æœ¬åœ°ç¯å¢ƒæµ‹è¯•
â”œâ”€â”€ phase2-user-management.md            # Phase 2: ç”¨æˆ·ç®¡ç†éªŒè¯
â”œâ”€â”€ phase3-deployment-prep.md            # Phase 3: éƒ¨ç½²å‡†å¤‡
â”œâ”€â”€ phase4-production.md                 # Phase 4: ç”Ÿäº§éƒ¨ç½²
â”œâ”€â”€ env-templates.md                     # ç¯å¢ƒå˜é‡é…ç½®æ¨¡æ¿
â””â”€â”€ testing-checklist.md                 # å®Œæ•´æµ‹è¯•æ£€æŸ¥æ¸…å•
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„æ¦‚è§ˆ

### ä¸‰ç«™ç‚¹ç»“æ„
```
wizPulseAI/
â”œâ”€â”€ auth-wizpulseai-com/      # ğŸ” è®¤è¯ä¸­å¿ƒ (localhost:3001)
â”œâ”€â”€ db-wizPulseAI-com/        # ğŸ“Š ç”¨æˆ·ä»ªè¡¨ç›˜ (localhost:3002)
â”œâ”€â”€ wizPulseAI-com/           # ğŸŒ ä¸»ç«™ (localhost:3000)
â””â”€â”€ docs/                     # ğŸ“š æ–‡æ¡£ä¸­å¿ƒ
```

### SSO è®¤è¯æœºåˆ¶
- **é¡¶çº§åŸŸ Cookie**: `.wizpulseai.com` (ç”Ÿäº§) / `.localhost` (æœ¬åœ°)
- **è®¤è¯æº**: Supabase Auth (é¡¹ç›®: `lhofjwiqjqjtycnhliga`)
- **ä¼šè¯å…±äº«**: é€šè¿‡ Cookie è·¨å­åŸŸå…±äº«è®¤è¯çŠ¶æ€
- **æƒé™ç³»ç»Ÿ**: `app_role` (admin/user/deleted)

## ğŸ“– æ‰§è¡Œè·¯çº¿å›¾

### Phase 1: æœ¬åœ°ç¯å¢ƒéªŒè¯ ğŸ¯ ï¼ˆä»Šå¤©ï¼Œ2å°æ—¶ï¼‰
**ç›®æ ‡**: ç¡®è®¤ä¸‰ç«™ç‚¹èƒ½æ­£å¸¸å¯åŠ¨å’Œ SSO ç™»å½•

**å…³é”®ä»»åŠ¡**:
- [ ] æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å’Œ Service Worker
- [ ] éªŒè¯ä¸‰ä¸ªç«™ç‚¹æ­£å¸¸å¯åŠ¨
- [ ] æµ‹è¯• SSO ç™»å½•æµç¨‹
- [ ] éªŒè¯è·¨ç«™ç‚¹çŠ¶æ€åŒæ­¥

**è¯¦ç»†æ–‡æ¡£**: [phase1-local-testing.md](phase1-local-testing.md)

---

### Phase 2: ç”¨æˆ·ç®¡ç†åŠŸèƒ½éªŒè¯ ğŸ‘¥ ï¼ˆ1-2å¤©ï¼Œ4å°æ—¶ï¼‰
**ç›®æ ‡**: éªŒè¯ç”¨æˆ·ç®¡ç†å’Œæƒé™ç³»ç»Ÿæ­£å¸¸å·¥ä½œ

**å…³é”®ä»»åŠ¡**:
- [ ] éªŒè¯ Supabase æ•°æ®åº“ç”¨æˆ·è¡¨ç»“æ„
- [ ] æµ‹è¯• Dashboard ç®¡ç†å‘˜ç”¨æˆ·ç®¡ç†åŠŸèƒ½
- [ ] éªŒè¯è§’è‰²æƒé™ç³»ç»Ÿ (admin/user)
- [ ] æµ‹è¯•ç”¨æˆ·å¢åˆ æ”¹æŸ¥æ“ä½œ

**è¯¦ç»†æ–‡æ¡£**: [phase2-user-management.md](phase2-user-management.md)

---

### Phase 3: éƒ¨ç½²å‡†å¤‡ ğŸš€ ï¼ˆ1å¤©ï¼Œ3å°æ—¶ï¼‰
**ç›®æ ‡**: é…ç½® Vercel é¡¹ç›®å’Œç”Ÿäº§ç¯å¢ƒ

**å…³é”®ä»»åŠ¡**:
- [ ] æ£€æŸ¥ Vercel é¡¹ç›®é…ç½®
- [ ] é…ç½®æ‰€æœ‰ç¯å¢ƒå˜é‡
- [ ] é…ç½®åŸŸå DNS å’Œ SSL
- [ ] é…ç½® Supabase å›è°ƒ URL
- [ ] é…ç½® Stripe Webhook

**è¯¦ç»†æ–‡æ¡£**: [phase3-deployment-prep.md](phase3-deployment-prep.md)

---

### Phase 4: ç”Ÿäº§éƒ¨ç½² ğŸŒ ï¼ˆ1å¤©ï¼Œ2å°æ—¶ï¼‰
**ç›®æ ‡**: éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå¹¶éªŒè¯åŠŸèƒ½

**å…³é”®ä»»åŠ¡**:
- [ ] æŒ‰é¡ºåºéƒ¨ç½²ä¸‰ä¸ªç«™ç‚¹ (Auth â†’ Dashboard â†’ Main)
- [ ] ç”Ÿäº§ç¯å¢ƒç«¯åˆ°ç«¯æµ‹è¯•
- [ ] éªŒè¯ç”¨æˆ·ç®¡ç†åŠŸèƒ½
- [ ] æ€§èƒ½å’Œå®‰å…¨æ£€æŸ¥

**è¯¦ç»†æ–‡æ¡£**: [phase4-production.md](phase4-production.md)

---

## â±ï¸ æ—¶é—´ä¼°ç®—

| é˜¶æ®µ | é¢„è®¡æ—¶é—´ | ä¼˜å…ˆçº§ | å®ŒæˆçŠ¶æ€ |
|-----|---------|-------|---------|
| Phase 1: æœ¬åœ°æµ‹è¯• | 2å°æ—¶ | ğŸ”´ P0 | â¬œ å¾…å¼€å§‹ |
| Phase 2: ç”¨æˆ·ç®¡ç† | 4å°æ—¶ | ğŸŸ  P1 | â¬œ å¾…å¼€å§‹ |
| Phase 3: éƒ¨ç½²å‡†å¤‡ | 3å°æ—¶ | ğŸŸ¡ P2 | â¬œ å¾…å¼€å§‹ |
| Phase 4: ç”Ÿäº§éƒ¨ç½² | 2å°æ—¶ | ğŸŸ¢ P3 | â¬œ å¾…å¼€å§‹ |
| **æ€»è®¡** | **11å°æ—¶** | | **0% å®Œæˆ** |

## ğŸ”§ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### æœ¬åœ°å¼€å‘
```bash
# å¯åŠ¨æ‰€æœ‰ç«™ç‚¹
./start-all.sh

# åœæ­¢æ‰€æœ‰ç«™ç‚¹
./stop-all.sh

# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
ps aux | grep "next dev"

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/auth.log
tail -f logs/dashboard.log
tail -f logs/main.log
```

### æµ‹è¯•éªŒè¯
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:3001  # Auth
curl http://localhost:3002  # Dashboard
curl http://localhost:3000  # Main

# æ£€æŸ¥ Cookie
# Chrome DevTools: F12 â†’ Application â†’ Cookies
```

### éƒ¨ç½²
```bash
# æ„å»ºéªŒè¯
npm run build

# Vercel éƒ¨ç½²
vercel --prod

# Git æ¨é€ï¼ˆè‡ªåŠ¨éƒ¨ç½²ï¼‰
git push origin main
```

## ğŸ“‹ å¿«é€Ÿæ£€æŸ¥æ¸…å•

### æœ¬åœ°ç¯å¢ƒ âœ…
- [ ] Node.js v18+ å·²å®‰è£…
- [ ] npm ä¾èµ–å·²å®‰è£…ï¼ˆä¸‰ä¸ªç«™ç‚¹ï¼‰
- [ ] .env.local æ–‡ä»¶å·²é…ç½®
- [ ] Supabase é¡¹ç›®å¯è®¿é—®
- [ ] å¯åŠ¨è„šæœ¬å¯æ‰§è¡Œ

### ç”Ÿäº§ç¯å¢ƒ âœ…
- [ ] Vercel è´¦å·å·²å‡†å¤‡
- [ ] åŸŸåå·²è´­ä¹°/é…ç½®
- [ ] Supabase é¡¹ç›®å·²åˆ›å»º
- [ ] Stripe è´¦å·å·²å‡†å¤‡ï¼ˆå¦‚éœ€æ”¯ä»˜ï¼‰
- [ ] ç¯å¢ƒå˜é‡å·²å‡†å¤‡

## ğŸ†˜ å¸¸è§é—®é¢˜

### æœ¬åœ°å¼€å‘
**Q: æµè§ˆå™¨æ˜¾ç¤º ERR_FAILEDï¼Ÿ**
A: æ¸…é™¤ Service Workerï¼ˆF12 â†’ Application â†’ Service Workers â†’ Unregisterï¼‰

**Q: Cookie ä¸å…±äº«ï¼Ÿ**
A: æ£€æŸ¥ `NEXT_PUBLIC_COOKIE_DOMAIN` æ˜¯å¦è®¾ç½®ä¸º `.localhost`

**Q: ç«¯å£è¢«å ç”¨ï¼Ÿ**
A: ä½¿ç”¨ `./stop-all.sh` åœæ­¢æ‰€æœ‰ç«™ç‚¹ï¼Œæˆ–æ‰‹åŠ¨ kill è¿›ç¨‹

### ç”Ÿäº§éƒ¨ç½²
**Q: ç™»å½•åè·³è½¬å¤±è´¥ï¼Ÿ**
A: æ£€æŸ¥ Supabase å›è°ƒ URL æ˜¯å¦åŒ…å«ç”Ÿäº§åŸŸå

**Q: Stripe Webhook ä¸å·¥ä½œï¼Ÿ**
A: éªŒè¯ Webhook ç­¾åå¯†é’¥å’Œç«¯ç‚¹ URL é…ç½®

**Q: è·¨ç«™ç‚¹çŠ¶æ€ä¸åŒæ­¥ï¼Ÿ**
A: æ£€æŸ¥ Cookie åŸŸåæ˜¯å¦ä¸º `.wizpulseai.com`ï¼ˆæ³¨æ„å‰é¢çš„ç‚¹ï¼‰

## ğŸ“ æ”¯æŒèµ„æº

- **æŠ€æœ¯æ–‡æ¡£**: `/docs/technical-docs/`
- **æœ¬åœ°æµ‹è¯•æŒ‡å—**: `LOCAL_TEST_GUIDE.md`
- **MCP ä½¿ç”¨æŒ‡å—**: `MCP_GUIDE.md`
- **ä¸‹ä¸€æ­¥è®¡åˆ’**: `NEXT_STEPS.md`

## ğŸ¯ å¼€å§‹æ‰§è¡Œ

**ç°åœ¨å¼€å§‹ Phase 1ï¼**

ğŸ‘‰ è¯·é˜…è¯»: [Phase 1: æœ¬åœ°ç¯å¢ƒæµ‹è¯•](phase1-local-testing.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-10-30
**æœ€åæ›´æ–°**: 2025-10-30
**ç»´æŠ¤è€…**: WizPulseAI Tech Team
